ALTER VIEW [dbo].[VW_ProductoEstadoUbic]
AS
SELECT        u.IdUbicacion, p.IdEstado, dbo.bodega.IdBodega, dbo.Nombre_Completo_Ubicacion(u.IdUbicacion, u.IdBodega) AS NombreUbic
FROM            dbo.bodega_area INNER JOIN
                         dbo.bodega ON dbo.bodega_area.IdBodega = dbo.bodega.IdBodega INNER JOIN
                         dbo.bodega_sector ON dbo.bodega_area.IdArea = dbo.bodega_sector.IdArea AND dbo.bodega_area.IdBodega = dbo.bodega_sector.IdBodega INNER JOIN
                         dbo.bodega_tramo ON dbo.bodega_sector.IdSector = dbo.bodega_tramo.IdSector AND dbo.bodega_sector.IdBodega = dbo.bodega_tramo.IdBodega INNER JOIN
                         dbo.producto_estado_ubic AS p INNER JOIN
                         dbo.bodega_ubicacion AS u ON p.IdUbicacionDefecto = u.IdUbicacion ON dbo.bodega_tramo.IdTramo = u.IdTramo AND dbo.bodega_tramo.IdBodega = u.IdBodega AND dbo.bodega_tramo.IdSector = u.IdSector AND 
                         dbo.bodega_tramo.IdArea = u.IdArea
GO

